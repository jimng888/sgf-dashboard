// Generated by scripts/embed-worker-assets.js - do not edit by hand
export const stylesCss = `:root {
  --bg: #0f1419;
  --card: #1a2332;
  --text: #e6edf3;
  --muted: #7d8590;
  --accent: #58a6ff;
  --green: #3fb950;
  --red: #f85149;
  --orange: #d29922;
}

* { box-sizing: border-box; }
body { font-family: ui-sans-serif, system-ui, sans-serif; background: var(--bg); color: var(--text); margin: 0; min-height: 100vh; }
.header { background: var(--card); border-bottom: 1px solid rgba(255,255,255,0.08); }
.header-inner { max-width: 1200px; margin: 0 auto; padding: 0.75rem 1rem; display: flex; align-items: center; justify-content: space-between; }
.logo { font-size: 1.1rem; margin: 0; font-weight: 600; }
.user-menu { display: flex; align-items: center; gap: 1rem; }
.user-name { color: var(--muted); font-size: 0.9rem; }
.main { max-width: 1200px; margin: 0 auto; padding: 1.5rem 1rem; }
.section { margin-bottom: 2rem; }
.section h2 { font-size: 1rem; margin: 0 0 0.5rem; color: var(--muted); font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
.section h3 { font-size: 0.95rem; margin: 0 0 0.5rem; }
.muted { color: var(--muted); font-size: 0.9rem; }
.small { font-size: 0.8rem; }

.status-cards { display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 0.5rem; }
.status-card { display: flex; align-items: center; gap: 0.75rem; background: var(--card); padding: 1rem; border-radius: 8px; border: 1px solid rgba(255,255,255,0.06); }
.status-dot { width: 12px; height: 12px; border-radius: 50%; background: var(--muted); }
.status-card.live .status-dot { background: var(--green); }
.status-card.down .status-dot { background: var(--red); }
.status-card .status-dot.neutral { background: var(--orange); }
.status-card strong { display: block; }
.status-card p { margin: 0.25rem 0 0; }

.btn { display: inline-block; padding: 0.5rem 1rem; border-radius: 6px; font-weight: 500; text-decoration: none; cursor: pointer; border: none; font-size: 0.9rem; }
.btn-primary { background: var(--accent); color: #fff; }
.btn-primary:hover { opacity: 0.9; }
.btn-ghost { background: transparent; color: var(--muted); }
.btn-ghost:hover { color: var(--text); }
.btn-google { background: #fff; color: #1a1a1a; }

.login-page { display: flex; align-items: center; justify-content: center; min-height: 100vh; }
.login-box { background: var(--card); padding: 2rem; border-radius: 12px; max-width: 360px; text-align: center; }
.login-box h1 { margin: 0 0 0.5rem; font-size: 1.25rem; }
.login-box .muted { margin-bottom: 1.5rem; }
.login-box .error { color: var(--red); margin-bottom: 1rem; font-size: 0.9rem; }
.login-box .btn-google { width: 100%; }

.ticket-form { background: var(--card); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; }
.form-inline { display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center; }
.form-inline input { padding: 0.5rem; border: 1px solid rgba(255,255,255,0.15); border-radius: 6px; background: var(--bg); color: var(--text); font-size: 0.9rem; }
.form-inline input[name="summary"] { min-width: 220px; }
.form-inline input[name="order_number"], .form-inline input[name="customer_phone"] { width: 120px; }

.table-wrap { overflow-x: auto; }
.ticket-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
.ticket-table th, .ticket-table td { text-align: left; padding: 0.6rem; border-bottom: 1px solid rgba(255,255,255,0.06); }
.ticket-table th { color: var(--muted); font-weight: 500; }
.assign-select { padding: 0.35rem 0.5rem; border-radius: 6px; background: var(--bg); color: var(--text); border: 1px solid rgba(255,255,255,0.15); font-size: 0.85rem; min-width: 120px; }
.badge { display: inline-block; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem; }
.badge-open { background: rgba(210,153,34,0.2); color: var(--orange); }
.badge-in_progress { background: rgba(88,166,255,0.2); color: var(--accent); }
.badge-resolved, .badge-closed { background: rgba(63,185,80,0.2); color: var(--green); }
`;
export const appJs = `(function () {
  function statusRefresh() {
    fetch('/api/status')
      .then(function (r) { return r.json(); })
      .then(function (data) {
        var card = document.querySelector('.status-card.live, .status-card.down');
        if (!card) return;
        if (data.live) {
          card.classList.remove('down');
          card.classList.add('live');
          card.querySelector('strong').textContent = 'Live';
        } else {
          card.classList.remove('live');
          card.classList.add('down');
          card.querySelector('strong').textContent = 'Down';
        }
        var msg = card.querySelector('.muted');
        if (msg) msg.textContent = data.message;
      })
      .catch(function () {});
  }

  var newForm = document.getElementById('new-ticket-form');
  if (newForm) {
    newForm.addEventListener('submit', function (e) {
      e.preventDefault();
      var form = e.target;
      var body = {
        summary: form.summary.value,
        order_number: form.order_number.value || undefined,
        customer_phone: form.customer_phone.value || undefined
      };
      fetch('/api/tickets', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
      })
        .then(function (r) {
          if (r.ok) window.location.reload();
          else return r.json().then(function (d) { alert(d.error || 'Failed'); });
        })
        .catch(function () { alert('Request failed'); });
    });
  }

  document.querySelectorAll('.assign-select').forEach(function (sel) {
    sel.addEventListener('change', function () {
      var ticketId = sel.getAttribute('data-ticket-id');
      var val = sel.value;
      var type = val === 'bot' ? 'bot' : 'human';
      var userId = type === 'human' ? val.split(':')[1] : null;
      fetch('/api/tickets/' + ticketId + '/assign', {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ assigned_to_type: type, assigned_to_user_id: userId })
      })
        .then(function (r) {
          if (!r.ok) sel.value = sel.dataset.prev || sel.options[0].value;
        })
        .catch(function () { sel.value = sel.dataset.prev || sel.options[0].value; });
      sel.dataset.prev = sel.value;
    });
  });

  function openclawRecent() {
    var el = document.getElementById('openclaw-recent');
    if (!el) return;
    fetch('/api/openclaw/recent-messages?limit=8')
      .then(function (r) { return r.ok ? r.json() : []; })
      .catch(function () { return []; })
      .then(function (list) {
        if (!list.length) { el.innerHTML = 'No recent messages.'; return; }
        el.innerHTML = '<strong>Recent activity</strong>: ' + list.slice(0, 5).map(function (m) {
          var who = m.role === 'user' ? 'User' : 'Bot';
          var t = (m.text || '').slice(0, 60) + (m.text && m.text.length > 60 ? '…' : '');
          return who + ': ' + t;
        }).join(' · ');
      });
  }

  var botBtn = document.getElementById('bot-toggle-btn');
  if (botBtn) {
    botBtn.addEventListener('click', function () {
      var currentlyOn = botBtn.getAttribute('data-enabled') === '1';
      var nextOn = !currentlyOn;
      fetch('/api/settings/bot_enabled', {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ enabled: nextOn })
      })
        .then(function (r) {
          if (r.ok) {
            botBtn.setAttribute('data-enabled', nextOn ? '1' : '0');
            botBtn.textContent = nextOn ? 'Bot is ON' : 'Bot is OFF';
            botBtn.classList.toggle('btn-primary', nextOn);
            botBtn.classList.toggle('btn-ghost', !nextOn);
            var statusEl = document.getElementById('bot-toggle-status');
            if (statusEl) statusEl.textContent = nextOn ? 'Bot will process messages.' : 'Bot is paused.';
          }
        })
        .catch(function () { alert('Failed to update'); });
    });
  }

  setInterval(statusRefresh, 30000);
  openclawRecent();
})();
`;
